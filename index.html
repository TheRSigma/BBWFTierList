<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBWF Illustration Rares Tier List</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #333333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            color: white;
        }
        
        .container {
            display: flex;
            flex: 1;
            gap: 20px;
        }
        
        .card-display {
            width: 250px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end; /* Align with bottom of tier list */
            align-items: center;
            position: relative;
        }
        
        .card-display img {
            width: 100%;
            max-height: 350px;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
            transition: transform 0.2s;
        }
        
        .card-display-info {
            text-align: center;
            margin-top: 10px;
            background: #444;
            padding: 10px;
            border-radius: 5px;
            width: 100%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .tier-list-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .tier-row {
            display: flex;
            margin-bottom: 10px;
            min-height: 120px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .tier-label {
            width: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            user-select: none;
        }
        
        /* Colorful tier labels */
        .tier-row:nth-child(1) .tier-label {
            background-color: #FF5252; /* S Tier - Red */
        }
        .tier-row:nth-child(2) .tier-label {
            background-color: #FF9800; /* A Tier - Orange */
        }
        .tier-row:nth-child(3) .tier-label {
            background-color: #FFEB3B; /* B Tier - Yellow */
            color: #333;
        }
        .tier-row:nth-child(4) .tier-label {
            background-color: #4CAF50; /* C Tier - Green */
        }
        .tier-row:nth-child(5) .tier-label {
            background-color: #2196F3; /* D Tier - Blue */
        }
        /* Additional tiers will get this default color */
        .tier-row:nth-child(n+6) .tier-label {
            background-color: #9C27B0; /* Purple for custom tiers */
        }
        
        .tier-label.editable {
            cursor: text;
        }
        
        .tier-cards {
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
            padding: 5px;
            gap: 5px;
            background-color: rgba(255,255,255,0.1);
            min-height: 110px;
        }
        
        .card-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            background-color: #444;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            min-height: 110px;
        }
        
        .card {
            width: 100px;
            cursor: grab;
            transition: transform 0.1s;
            position: relative;
        }
        
        .card img {
            width: 100%;
            height: auto;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .card-info {
            text-align: center;
            font-size: 12px;
            margin-top: 5px;
            background: rgba(0,0,0,0.5);
            padding: 3px;
            border-radius: 3px;
        }
        
        .card.dragging {
            transform: scale(1.5);
            z-index: 100;
            cursor: grabbing;
            opacity: 0.8;
        }
        
        .tier-card {
            width: 80px;
            transition: all 0.2s;
            cursor: grab;
        }
        
        .tier-card.dragging {
            transform: scale(1.2);
            z-index: 100;
            cursor: grabbing;
            opacity: 0.8;
        }
        
        .tier-card img {
            width: 100%;
            height: auto;
            border-radius: 3px;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        button {
            padding: 8px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        .drag-over {
            background-color: rgba(255, 255, 255, 0.2) !important;
            border: 2px dashed rgba(255, 255, 255, 0.5);
        }

        /* Mobile-specific styles */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .card-display {
                width: 100%;
                max-width: 250px;
                margin: 0 auto 20px;
            }
            
            .card-display img {
                max-height: 250px;
            }
            
            .tier-card {
                width: 60px;
            }
            
            .card {
                width: 80px;
            }
        }

        /* Header with logos */
        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .header img.logo {
            height: 60px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .header img.logo:hover {
            transform: scale(1.05);
        }
        
        .title-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* Hidden controls */
        .controls.hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="https://raw.githubusercontent.com/TheRSigma/BBWFTierList/main/images/blackbolt-logo.png" alt="Black Bolt" class="logo" id="blackbolt-logo">
        <div class="title-container">
            <h1>Black Bolt + White Flare Illustration Rares Tier List</h1>
        </div>
        <img src="https://raw.githubusercontent.com/TheRSigma/BBWFTierList/main/images/whiteflare-logo.png" alt="White Flare" class="logo" id="whiteflare-logo">
    </div>
    
    <div class="controls">
        <button id="add-tier">Add Tier</button>
        <button id="save-tier-list">Save Tier List</button>
        <button id="load-tier-list">Load Tier List</button>
        <button id="reset-tier-list">Reset</button>
    </div>
    
    <div class="container">
        <div class="card-display">
            <img id="large-card" src="https://raw.githubusercontent.com/TheRSigma/BBWFTierList/main/images/blackbolt-87.jpg" alt="Selected Card">
            <div class="card-display-info">
                <div id="large-card-name">Select a card</div>
                <div id="large-card-number"></div>
            </div>
        </div>
        
        <div class="tier-list-container">
            <div class="tier-row">
                <div class="tier-label editable" contenteditable="true">S Tier</div>
                <div class="tier-cards" data-tier="s-tier"></div>
            </div>
            <div class="tier-row">
                <div class="tier-label editable" contenteditable="true">A Tier</div>
                <div class="tier-cards" data-tier="a-tier"></div>
            </div>
            <div class="tier-row">
                <div class="tier-label editable" contenteditable="true">B Tier</div>
                <div class="tier-cards" data-tier="b-tier"></div>
            </div>
            <div class="tier-row">
                <div class="tier-label editable" contenteditable="true">C Tier</div>
                <div class="tier-cards" data-tier="c-tier"></div>
            </div>
            <div class="tier-row">
                <div class="tier-label editable" contenteditable="true">D Tier</div>
                <div class="tier-cards" data-tier="d-tier"></div>
            </div>
        </div>
    </div>
    
    <div class="card-pool" id="card-pool">
        <!-- Cards will be inserted here by JavaScript -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Card data - combined and sorted by National Dex number
            const cardData = [
                // Black Bolt cards
                {id: "sv11b-097", name: "Victini", number: "97/173", dex: "494", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-97.jpg?raw=true"},
                {id: "sv11b-087", name: "Snivy", number: "087/173", dex: "495", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-87.jpg?raw=true"},
                {id: "sv11b-088", name: "Servine", number: "088/173", dex: "496", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-88.jpg?raw=true"},
                {id: "sv11b-167", name: "Serperior", number: "167/173", dex: "497", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-167.jpg?raw=true"},
                {id: "sv11w-096", name: "Tepig", number: "096/173", dex: "498", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-96.jpg?raw=true"},
                {id: "sv11w-097", name: "Pignite", number: "097/173", dex: "499", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-97.jpg?raw=true"},
                {id: "sv11w-098", name: "Emboar", number: "098/173", dex: "500", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-98.jpg?raw=true"},
                {id: "sv11w-102", name: "Oshawott", number: "102/173", dex: "501", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-102.jpg?raw=true"},
                {id: "sv11w-103", name: "Dewott", number: "103/173", dex: "502", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-103.jpg?raw=true"},
                {id: "sv11w-104", name: "Samurott", number: "104/173", dex: "503", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-104.jpg?raw=true"},
                {id: "sv11w-151", name: "Patrat", number: "151/173", dex: "504", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-151.jpg?raw=true"},
                {id: "sv11w-152", name: "Watchog", number: "152/173", dex: "505", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-152.jpg?raw=true"},
                {id: "sv11w-153", name: "Lillipup", number: "153/173", dex: "506", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-153.jpg?raw=true"},
                {id: "sv11w-154", name: "Herdier", number: "154/173", dex: "507", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-154.jpg?raw=true"},
                {id: "sv11w-155", name: "Stoutland", number: "155/173", dex: "508", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-155.jpg?raw=true"},
                {id: "sv11w-134", name: "Purrloin", number: "134/173", dex: "509", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-134.jpg?raw=true"},
                {id: "sv11w-135", name: "Liepard", number: "135/173", dex: "510", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-135.jpg?raw=true"},
                {id: "sv11b-089", name: "Pansage", number: "089/173", dex: "511", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-89.jpg?raw=true"},
                {id: "sv11b-090", name: "Simisage", number: "090/173", dex: "512", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-90.jpg?raw=true"},
                {id: "sv11w-099", name: "Pansear", number: "099/173", dex: "513", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-99.jpg?raw=true"},
                {id: "sv11w-100", name: "Simisear", number: "100/173", dex: "514", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-100.jpg?raw=true"},
                {id: "sv11b-105", name: "Panpour", number: "105/173", dex: "515", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-105.jpg?raw=true"},
                {id: "sv11b-106", name: "Simipour", number: "106/173", dex: "516", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-106.jpg?raw=true"},
                {id: "sv11b-121", name: "Munna", number: "121/173", dex: "517", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-121.jpg?raw=true"},
                {id: "sv11b-122", name: "Musharna", number: "122/173", dex: "518", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-122.jpg?raw=true"},
                {id: "sv11b-153", name: "Pidove", number: "153/173", dex: "519", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-153.jpg?raw=true"},
                {id: "sv11b-154", name: "Tranquill", number: "154/173", dex: "520", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-154.jpg?raw=true"},
                {id: "sv11b-155", name: "Unfezant", number: "155/173", dex: "521", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-155.jpg?raw=true"},
                {id: "sv11w-111", name: "Blitzle", number: "111/173", dex: "522", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-111.jpg?raw=true"},
                {id: "sv11w-112", name: "Zebstrika", number: "112/173", dex: "523", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-112.jpg?raw=true"},
                {id: "sv11w-125", name: "Roggenrola", number: "125/173", dex: "524", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-125.jpg?raw=true"},
                {id: "sv11w-126", name: "Boldore", number: "126/173", dex: "525", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-126.jpg?raw=true"},
                {id: "sv11w-127", name: "Gigalith", number: "127/173", dex: "526", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-127.jpg?raw=true"},
                {id: "sv11w-116", name: "Woobat", number: "116/173", dex: "527", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-116.jpg?raw=true"},
                {id: "sv11w-117", name: "Swoobat", number: "117/173", dex: "528", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-117.jpg?raw=true"},
                {id: "sv11b-130", name: "Drilbur", number: "130/173", dex: "529", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-130.jpg?raw=true"},
                {id: "sv11b-171", name: "Excadrill", number: "171/173", dex: "530", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-171.jpg?raw=true"},
                {id: "sv11b-156", name: "Audino", number: "156/173", dex: "531", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-156.jpg?raw=true"},
                {id: "sv11b-131", name: "Timburr", number: "131/173", dex: "532", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-131.jpg?raw=true"},
                {id: "sv11b-132", name: "Gurdurr", number: "132/173", dex: "533", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-132.jpg?raw=true"},
                {id: "sv11b-133", name: "Conkeldurr", number: "133/173", dex: "534", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-133.jpg?raw=true"},
                {id: "sv11b-107", name: "Tympole", number: "107/173", dex: "535", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-107.jpg?raw=true"},
                {id: "sv11b-108", name: "Palpitoad", number: "108/173", dex: "536", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-108.jpg?raw=true"},
                {id: "sv11b-109", name: "Seismitoad", number: "109/173", dex: "537", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-109.jpg?raw=true"},
                {id: "sv11b-134", name: "Throh", number: "134/173", dex: "538", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-134.jpg?raw=true"},
                {id: "sv11w-128", name: "Sawk", number: "128/173", dex: "539", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-128.jpg?raw=true"},
                {id: "sv11w-087", name: "Sewaddle", number: "087/173", dex: "540", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-87.jpg?raw=true"},
                {id: "sv11w-088", name: "Swadloon", number: "088/173", dex: "541", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-88.jpg?raw=true"},
                {id: "sv11w-089", name: "Leavanny", number: "089/173", dex: "542", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-89.jpg?raw=true"},
                {id: "sv11b-138", name: "Venipede", number: "138/173", dex: "543", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-138.jpg?raw=true"},
                {id: "sv11b-139", name: "Whirlipede", number: "139/173", dex: "544", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-139.jpg?raw=true"},
                {id: "sv11b-140", name: "Scolipede", number: "140/173", dex: "545", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-140.jpg?raw=true"},
                {id: "sv11w-090", name: "Cottonee", number: "090/173", dex: "546", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-90.jpg?raw=true"},
                {id: "sv11w-167", name: "Whimsicott", number: "167/173", dex: "547", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-167.jpg?raw=true"},
                {id: "sv11b-091", name: "Petilil", number: "091/173", dex: "548", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-91.jpg?raw=true"},
                {id: "sv11b-092", name: "Lilligant", number: "092/173", dex: "549", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-92.jpg?raw=true"},
                {id: "sv11w-105", name: "Basculin", number: "105/173", dex: "550", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-105.jpg?raw=true"},
                {id: "sv11b-141", name: "Sandile", number: "141/173", dex: "551", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-141.jpg?raw=true"},
                {id: "sv11b-142", name: "Krokorok", number: "142/173", dex: "552", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-142.jpg?raw=true"},
                {id: "sv11b-143", name: "Krookodile", number: "143/173", dex: "553", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-143.jpg?raw=true"},
                {id: "sv11b-098", name: "Darumaka", number: "98/173", dex: "554", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-98.jpg?raw=true"},
                {id: "sv11b-099", name: "Darumaka", number: "99/173", dex: "554", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-99.jpg?raw=true"},
                {id: "sv11b-093", name: "Maractus", number: "93/173", dex: "556", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-93.jpg?raw=true"},
                {id: "sv11b-135", name: "Dwebble", number: "135/173", dex: "557", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-135.jpg?raw=true"},
                {id: "sv11b-136", name: "Crustle", number: "136/173", dex: "558", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-136.jpg?raw=true"},
                {id: "sv11w-136", name: "Scraggy", number: "136/173", dex: "559", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-136.jpg?raw=true"},
                {id: "sv11w-137", name: "Scrafty", number: "137/173", dex: "560", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-137.jpg?raw=true"},
                {id: "sv11w-118", name: "Sigilyph", number: "118/173", dex: "561", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-118.jpg?raw=true"},
                {id: "sv11w-119", name: "Yamask", number: "119/173", dex: "562", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-119.jpg?raw=true"},
                {id: "sv11w-120", name: "Cofagrigus", number: "120/173", dex: "563", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-120.jpg?raw=true"},
                {id: "sv11b-110", name: "Tirtouga", number: "110/173", dex: "564", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-110.jpg?raw=true"},
                {id: "sv11b-111", name: "Carracosta", number: "111/173", dex: "565", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-111.jpg?raw=true"},
                {id: "sv11w-129", name: "Archen", number: "129/173", dex: "566", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-129.jpg?raw=true"},
                {id: "sv11w-130", name: "Archeops", number: "130/173", dex: "567", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-130.jpg?raw=true"},
                {id: "sv11w-138", name: "Trubbish", number: "138/173", dex: "568", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-138.jpg?raw=true"},
                {id: "sv11w-139", name: "Garbodor", number: "139/173", dex: "569", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-139.jpg?raw=true"},
                {id: "sv11w-140", name: "Zorua", number: "140/173", dex: "570", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-140.jpg?raw=true"},
                {id: "sv11w-141", name: "Zoroark", number: "141/173", dex: "571", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-141.jpg?raw=true"},
                {id: "sv11b-157", name: "Minccino", number: "157/173", dex: "572", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-157.jpg?raw=true"},
                {id: "sv11b-158", name: "Cinccino", number: "158/173", dex: "573", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-158.jpg?raw=true"},
                {id: "sv11w-121", name: "Gothita", number: "121/173", dex: "574", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-121.jpg?raw=true"},
                {id: "sv11w-122", name: "Gothorita", number: "122/173", dex: "575", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-122.jpg?raw=true"},
                {id: "sv11w-123", name: "Gothitelle", number: "123/173", dex: "576", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-123.jpg?raw=true"},
                {id: "sv11b-123", name: "Solosis", number: "123/173", dex: "577", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-123.jpg?raw=true"},
                {id: "sv11b-124", name: "Duosion", number: "124/173", dex: "578", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-124.jpg?raw=true"},
                {id: "sv11b-125", name: "Reuniclus", number: "125/173", dex: "579", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-125.jpg?raw=true"},
                {id: "sv11w-106", name: "Ducklett", number: "106/173", dex: "580", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-106.jpg?raw=true"},
                {id: "sv11w-107", name: "Swanna", number: "107/173", dex: "581", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-107.jpg?raw=true"},
                {id: "sv11w-108", name: "Vanillite", number: "108/173", dex: "582", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-108.jpg?raw=true"},
                {id: "sv11w-109", name: "Vanillish", number: "109/173", dex: "583", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-109.jpg?raw=true"},
                {id: "sv11w-110", name: "Vanilluxe", number: "110/173", dex: "584", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-110.jpg?raw=true"},
                {id: "sv11w-091", name: "Deerling", number: "091/173", dex: "585", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-91.jpg?raw=true"},
                {id: "sv11w-092", name: "Sawsbuck", number: "092/173", dex: "586", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-92.jpg?raw=true"},
                {id: "sv11b-116", name: "Emolga", number: "116/173", dex: "587", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-116.jpg?raw=true"},
                {id: "sv11b-094", name: "Karrablast", number: "94/173", dex: "588", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-94.jpg?raw=true"},
                {id: "sv11b-146", name: "Escavalier", number: "146/173", dex: "589", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-146.jpg?raw=true"},
                {id: "sv11b-095", name: "Foongus", number: "95/173", dex: "590", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-95.jpg?raw=true"},
                {id: "sv11b-096", name: "Amoonguss", number: "96/173", dex: "591", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-96.jpg?raw=true"},
                {id: "sv11w-124", name: "Frillish", number: "124/173", dex: "592", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-124.jpg?raw=true"},
                {id: "sv11w-170", name: "Jellicent", number: "170/173", dex: "593", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-170.jpg?raw=true"},
                {id: "sv11b-112", name: "Alomomola", number: "112/173", dex: "594", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-112.jpg?raw=true"},
                {id: "sv11w-113", name: "Joltik", number: "113/173", dex: "595", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-113.jpg?raw=true"},
                {id: "sv11w-114", name: "Galvantula", number: "114/173", dex: "596", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-114.jpg?raw=true"},
                {id: "sv11w-144", name: "Ferroseed", number: "144/173", dex: "597", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-144.jpg?raw=true"},
                {id: "sv11w-145", name: "Ferrothorn", number: "145/173", dex: "598", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-145.jpg?raw=true"},
                {id: "sv11w-146", name: "Klink", number: "146/173", dex: "599", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-146.jpg?raw=true"},
                {id: "sv11w-147", name: "Klang", number: "147/173", dex: "600", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-147.jpg?raw=true"},
                {id: "sv11w-148", name: "Klinklang", number: "148/173", dex: "601", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-148.jpg?raw=true"},
                {id: "sv11b-117", name: "Tynamo", number: "117/173", dex: "602", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-117.jpg?raw=true"},
                {id: "sv11b-118", name: "Eelektrik", number: "118/173", dex: "603", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-118.jpg?raw=true"},
                {id: "sv11b-119", name: "Eelektross", number: "119/173", dex: "604", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-119.jpg?raw=true"},
                {id: "sv11b-126", name: "Elgyem", number: "126/173", dex: "605", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-126.jpg?raw=true"},
                {id: "sv11b-127", name: "Beheeyem", number: "127/173", dex: "606", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-127.jpg?raw=true"},
                {id: "sv11b-100", name: "Litwick", number: "100/173", dex: "607", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-100.jpg?raw=true"},
                {id: "sv11b-101", name: "Lampent", number: "101/173", dex: "608", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-101.jpg?raw=true"},
                {id: "sv11b-102", name: "Chandelure", number: "102/173", dex: "609", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-102.jpg?raw=true"},
                {id: "sv11b-150", name: "Axew", number: "150/173", dex: "610", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-150.jpg?raw=true"},
                {id: "sv11b-151", name: "Fraxure", number: "151/173", dex: "611", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-151.jpg?raw=true"},
                {id: "sv11b-152", name: "Haxorus", number: "152/173", dex: "612", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-152.jpg?raw=true"},
                {id: "sv11b-113", name: "Cubchoo", number: "113/173", dex: "613", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-113.jpg?raw=true"},
                {id: "sv11b-114", name: "Beartic", number: "114/173", dex: "614", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-114.jpg?raw=true"},
                {id: "sv11b-115", name: "Cryogonal", number: "115/173", dex: "615", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-115.jpg?raw=true"},
                {id: "sv11w-093", name: "Shelmet", number: "093/173", dex: "616", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-93.jpg?raw=true"},
                {id: "sv11w-094", name: "Accelgor", number: "094/173", dex: "617", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-94.jpg?raw=true"},
                {id: "sv11w-115", name: "Stunfisk", number: "115/173", dex: "618", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-115.jpg?raw=true"},
                {id: "sv11w-131", name: "Mienfoo", number: "131/173", dex: "619", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-131.jpg?raw=true"},
                {id: "sv11w-132", name: "Mienshao", number: "132/173", dex: "620", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-132.jpg?raw=true"},
                {id: "sv11w-150", name: "Druddigon", number: "150/173", dex: "621", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-150.jpg?raw=true"},
                {id: "sv11b-128", name: "Golett", number: "128/173", dex: "622", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-128.jpg?raw=true"},
                {id: "sv11b-129", name: "Golurk", number: "129/173", dex: "623", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-129.jpg?raw=true"},
                {id: "sv11b-147", name: "Pawniard", number: "147/173", dex: "624", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-147.jpg?raw=true"},
                {id: "sv11b-148", name: "Bisharp", number: "148/173", dex: "625", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-148.jpg?raw=true"},
                {id: "sv11w-172", name: "Bouffalant", number: "172/173", dex: "626", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-172.jpg?raw=true"},
                {id: "sv11w-156", name: "Rufflet", number: "156/173", dex: "627", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-156.jpg?raw=true"},
                {id: "sv11w-157", name: "Braviary", number: "157/173", dex: "628", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-157.jpg?raw=true"},
                {id: "sv11b-144", name: "Vullaby", number: "144/173", dex: "629", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-144.jpg?raw=true"},
                {id: "sv11b-145", name: "Mandibuzz", number: "145/173", dex: "630", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-145.jpg?raw=true"},
                {id: "sv11w-101", name: "Heatmor", number: "101/173", dex: "631", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-101.jpg?raw=true"},
                {id: "sv11w-149", name: "Durant", number: "149/173", dex: "632", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-149.jpg?raw=true"},
                {id: "sv11w-142", name: "Deino", number: "142/173", dex: "633", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-142.jpg?raw=true"},
                {id: "sv11w-143", name: "Zweilous", number: "143/173", dex: "634", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-143.jpg?raw=true"},
                {id: "sv11w-171", name: "Hydreigon", number: "171/173", dex: "635", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-171.jpg?raw=true"},
                {id: "sv11b-103", name: "Larvesta", number: "103/173", dex: "636", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-103.jpg?raw=true"},
                {id: "sv11b-104", name: "Volcarona", number: "104/173", dex: "637", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-104.jpg?raw=true"},
                {id: "sv11b-149", name: "Cobalion", number: "149/173", dex: "638", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-149.jpg?raw=true"},
                {id: "sv11w-133", name: "Terrakion", number: "133/173", dex: "639", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-133.jpg?raw=true"},
                {id: "sv11w-095", name: "Virizion", number: "095/173", dex: "640", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-95.jpg?raw=true"},
                {id: "sv11w-158", name: "Tornadus", number: "158/173", dex: "641", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-158.jpg?raw=true"},
                {id: "sv11b-120", name: "Thundurus", number: "120/173", dex: "642", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-120.jpg?raw=true"},
                {id: "sv11w-168", name: "Reshiram", number: "168/173", dex: "643", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-168.jpg?raw=true"},
                {id: "sv11b-169", name: "Zekrom", number: "169/173", dex: "644", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-169.jpg?raw=true"},
                {id: "sv11b-137", name: "Landorus", number: "137/173", dex: "645", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-137.jpg?raw=true"},
                {id: "sv11b-168", name: "Kyurem", number: "168/173", dex: "646", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-168.jpg?raw=true"},
                {id: "sv11w-169", name: "Keldeo", number: "169/173", dex: "647", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-169.jpg?raw=true"},
                {id: "sv11b-170", name: "Meloetta", number: "170/173", dex: "648", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-170.jpg?raw=true"},
                {id: "sv11b-172", name: "Genesect", number: "172/173", dex: "649", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-172.jpg?raw=true"},
                // Characters at the end
                {id: "sv11b-173", name: "N", number: "173/173", dex: "000", set: "blackbolt", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/blackbolt-173.jpg?raw=true"},
                {id: "sv11w-173", name: "Hilda", number: "173/173", dex: "000", set: "whiteflare", img: "https://github.com/TheRSigma/BBWFTierList/blob/main/images/whiteflare-173.jpg?raw=true"}
            ];

            // Initialize the card pool
            const cardPool = document.getElementById('card-pool');
            const largeCard = document.getElementById('large-card');
            const largeCardName = document.getElementById('large-card-name');
            const largeCardNumber = document.getElementById('large-card-number');
            
            // Store card elements for easy access
            const cardElements = {};
            
            // Track which cards are in the tier list
            const cardsInTiers = new Set();
            
            // Function to create card element
            function createCardElement(card) {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.setAttribute('draggable', 'true');
                cardElement.setAttribute('data-id', card.id);
                cardElement.setAttribute('data-name', card.name);
                cardElement.setAttribute('data-number', card.number);
                cardElement.setAttribute('data-dex', card.dex);
                cardElement.setAttribute('data-set', card.set);
                
                const img = document.createElement('img');
                img.src = card.img;
                img.alt = card.name;
                img.loading = 'lazy';
                
                const cardInfo = document.createElement('div');
                cardInfo.className = 'card-info';
                
                const nameSpan = document.createElement('span');
                nameSpan.className = 'card-name';
                nameSpan.textContent = card.name;
                
                const numberSpan = document.createElement('span');
                numberSpan.className = 'card-number';
                numberSpan.textContent = `${card.number} (#${card.dex})`;
                
                cardInfo.appendChild(nameSpan);
                cardInfo.appendChild(numberSpan);
                
                cardElement.appendChild(img);
                cardElement.appendChild(cardInfo);
                
                // Store reference
                cardElements[card.id] = cardElement;
                
                return cardElement;
            }
            
            // Function to create tier card element
            function createTierCardElement(cardId) {
                const card = cardElements[cardId];
                if (!card) return null;
                
                const tierCard = document.createElement('div');
                tierCard.className = 'tier-card';
                tierCard.setAttribute('data-id', cardId);
                tierCard.setAttribute('draggable', 'true');
                
                const img = document.createElement('img');
                img.src = card.querySelector('img').src;
                img.alt = card.getAttribute('data-name');
                
                tierCard.appendChild(img);
                
                return tierCard;
            }
            
            // Function to render cards
            function renderCards() {
                cardPool.innerHTML = '';
                
                cardData.forEach(card => {
                    if (!cardsInTiers.has(card.id)) {
                        const cardElement = createCardElement(card);
                        cardPool.appendChild(cardElement);
                    }
                });
                
                // Reinitialize drag and drop
                initDragAndDrop();
            }
            
            // Initialize drag and drop functionality
            function initDragAndDrop() {
                const cards = document.querySelectorAll('.card');
                const tierCards = document.querySelectorAll('.tier-card');
                const tierContainers = document.querySelectorAll('.tier-cards');
                const cardPoolContainer = document.getElementById('card-pool');
                
                // Clear existing event listeners
                cards.forEach(card => {
                    card.removeEventListener('dragstart', dragStart);
                    card.removeEventListener('dragend', dragEnd);
                    card.removeEventListener('click', cardClick);
                    card.addEventListener('dragstart', dragStart);
                    card.addEventListener('dragend', dragEnd);
                    card.addEventListener('click', cardClick);
                });
                
                tierCards.forEach(card => {
                    card.removeEventListener('dragstart', tierCardDragStart);
                    card.removeEventListener('dragend', tierCardDragEnd);
                    card.removeEventListener('click', tierCardClick);
                    card.addEventListener('dragstart', tierCardDragStart);
                    card.addEventListener('dragend', tierCardDragEnd);
                    card.addEventListener('click', tierCardClick);
                });
                
                tierContainers.forEach(container => {
                    container.removeEventListener('dragover', dragOver);
                    container.removeEventListener('dragenter', dragEnter);
                    container.removeEventListener('dragleave', dragLeave);
                    container.removeEventListener('drop', tierDrop);
                    container.addEventListener('dragover', dragOver);
                    container.addEventListener('dragenter', dragEnter);
                    container.addEventListener('dragleave', dragLeave);
                    container.addEventListener('drop', tierDrop);
                });
                
                cardPoolContainer.removeEventListener('dragover', dragOver);
                cardPoolContainer.removeEventListener('dragenter', dragEnter);
                cardPoolContainer.removeEventListener('dragleave', dragLeave);
                cardPoolContainer.removeEventListener('drop', cardPoolDrop);
                cardPoolContainer.addEventListener('dragover', dragOver);
                cardPoolContainer.addEventListener('dragenter', dragEnter);
                cardPoolContainer.addEventListener('dragleave', dragLeave);
                cardPoolContainer.addEventListener('drop', cardPoolDrop);
            }
            
            // Card click handlers
            function cardClick() {
                const cardId = this.getAttribute('data-id');
                const card = cardElements[cardId];
                
                largeCard.src = card.querySelector('img').src;
                largeCard.alt = card.getAttribute('data-name');
                largeCardName.textContent = card.getAttribute('data-name');
                largeCardNumber.textContent = `${card.getAttribute('data-number')} (#${card.getAttribute('data-dex')})`;
            }
            
            function tierCardClick() {
                const cardId = this.getAttribute('data-id');
                const card = cardElements[cardId];
                
                largeCard.src = card.querySelector('img').src;
                largeCard.alt = card.getAttribute('data-name');
                largeCardName.textContent = card.getAttribute('data-name');
                largeCardNumber.textContent = `${card.getAttribute('data-number')} (#${card.getAttribute('data-dex')})`;
            }
            
            // Drag and drop functions
            let draggedCard = null;
            let draggedCardType = null; // 'card' or 'tier-card'
            let draggedCardIndex = -1;
            
            function dragStart() {
                draggedCard = this;
                draggedCardType = 'card';
                draggedCardIndex = Array.from(this.parentNode.children).indexOf(this);
                setTimeout(() => {
                    this.classList.add('dragging');
                    
                    // Show large card when dragging starts
                    const cardId = this.getAttribute('data-id');
                    const card = cardElements[cardId];
                    
                    largeCard.src = card.querySelector('img').src;
                    largeCard.alt = card.getAttribute('data-name');
                    largeCardName.textContent = card.getAttribute('data-name');
                    largeCardNumber.textContent = `${card.getAttribute('data-number')} (#${card.getAttribute('data-dex')})`;
                }, 0);
            }
            
            function tierCardDragStart() {
                draggedCard = this;
                draggedCardType = 'tier-card';
                setTimeout(() => {
                    this.classList.add('dragging');
                    
                    // Show large card when dragging starts
                    const cardId = this.getAttribute('data-id');
                    const card = cardElements[cardId];
                    
                    largeCard.src = card.querySelector('img').src;
                    largeCard.alt = card.getAttribute('data-name');
                    largeCardName.textContent = card.getAttribute('data-name');
                    largeCardNumber.textContent = `${card.getAttribute('data-number')} (#${card.getAttribute('data-dex')})`;
                }, 0);
            }
            
            function dragEnd() {
                this.classList.remove('dragging');
                draggedCard = null;
                draggedCardType = null;
                draggedCardIndex = -1;
            }
            
            function tierCardDragEnd() {
                this.classList.remove('dragging');
                draggedCard = null;
                draggedCardType = null;
                draggedCardIndex = -1;
            }
            
            function dragOver(e) {
                e.preventDefault();
            }
            
            function dragEnter(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            }
            
            function dragLeave() {
                this.classList.remove('drag-over');
            }
            
            function tierDrop() {
                this.classList.remove('drag-over');
                
                if (draggedCardType === 'card') {
                    // Moving from card pool to tier
                    const cardId = draggedCard.getAttribute('data-id');
                    
                    // Only proceed if the card isn't already in a tier
                    if (!cardsInTiers.has(cardId)) {
                        const tierCard = createTierCardElement(cardId);
                        
                        if (tierCard) {
                            // Add to tier
                            this.appendChild(tierCard);
                            
                            // Mark card as being in a tier
                            cardsInTiers.add(cardId);
                            
                            // Remove from card pool
                            draggedCard.remove();
                            
                            // Adjust card sizes if tier is getting full
                            adjustCardSizes(this);
                            
                            // Reinitialize drag and drop for the new card
                            initDragAndDrop();
                        }
                    }
                } else if (draggedCardType === 'tier-card') {
                    // Moving between tiers
                    const cardId = draggedCard.getAttribute('data-id');
                    const tierCard = createTierCardElement(cardId);
                    
                    if (tierCard) {
                        // Add to tier
                        this.appendChild(tierCard);
                        
                        // Remove old card
                        draggedCard.remove();
                        
                        // Adjust card sizes if tier is getting full
                        adjustCardSizes(this);
                        
                        // Reinitialize drag and drop for the new card
                        initDragAndDrop();
                    }
                }
            }
            
            function cardPoolDrop(e) {
                this.classList.remove('drag-over');
                
                if (draggedCardType === 'tier-card') {
                    // Moving from tier back to card pool
                    const cardId = draggedCard.getAttribute('data-id');
                    const card = cardElements[cardId];
                    
                    // Only proceed if the card exists
                    if (card) {
                        // Add back to card pool
                        const newCard = createCardElement({
                            id: cardId,
                            name: card.getAttribute('data-name'),
                            number: card.getAttribute('data-number'),
                            dex: card.getAttribute('data-dex'),
                            set: card.getAttribute('data-set'),
                            img: card.querySelector('img').src
                        });
                        
                        // Insert at the original position or at the drop position
                        const dropPosition = getDropPosition(this, e.clientX, e.clientY);
                        if (dropPosition >= 0) {
                            if (dropPosition < this.children.length) {
                                this.insertBefore(newCard, this.children[dropPosition]);
                            } else {
                                this.appendChild(newCard);
                            }
                        } else {
                            this.appendChild(newCard);
                        }
                        
                        // Remove from cards in tiers
                        cardsInTiers.delete(cardId);
                        
                        // Remove old card
                        draggedCard.remove();
                        
                        // Reinitialize drag and drop for the new card
                        initDragAndDrop();
                    }
                } else if (draggedCardType === 'card') {
                    // Reordering within card pool
                    const dropPosition = getDropPosition(this, e.clientX, e.clientY);
                    if (dropPosition >= 0 && dropPosition !== draggedCardIndex && dropPosition !== draggedCardIndex + 1) {
                        if (dropPosition < this.children.length) {
                            this.insertBefore(draggedCard, this.children[dropPosition]);
                        } else {
                            this.appendChild(draggedCard);
                        }
                    }
                }
            }
            
            // Helper function to determine drop position
            function getDropPosition(container, x, y) {
                const cards = container.children;
                for (let i = 0; i < cards.length; i++) {
                    const rect = cards[i].getBoundingClientRect();
                    if (y < rect.top + rect.height / 2) {
                        return i;
                    }
                }
                return cards.length;
            }
            
            // Adjust card sizes in a tier based on how many cards are in it
            function adjustCardSizes(tier) {
                const cards = tier.querySelectorAll('.tier-card');
                const cardCount = cards.length;
                
                // Calculate new size based on number of cards
                let newSize = 80; // Default size
                
                if (cardCount > 8) {
                    newSize = 60;
                } else if (cardCount > 5) {
                    newSize = 70;
                }
                
                // Apply new size to all cards in tier
                cards.forEach(card => {
                    card.style.width = `${newSize}px`;
                });
            }
            
            // Add tier functionality
            document.getElementById('add-tier').addEventListener('click', function() {
                const tierListContainer = document.querySelector('.tier-list-container');
                const tierCount = tierListContainer.querySelectorAll('.tier-row').length;
                const newTierId = `tier-${tierCount + 1}`;
                
                const tierRow = document.createElement('div');
                tierRow.className = 'tier-row';
                
                const tierLabel = document.createElement('div');
                tierLabel.className = 'tier-label editable';
                tierLabel.setAttribute('contenteditable', 'true');
                tierLabel.textContent = 'New Tier';
                
                const tierCards = document.createElement('div');
                tierCards.className = 'tier-cards';
                tierCards.setAttribute('data-tier', newTierId);
                
                tierRow.appendChild(tierLabel);
                tierRow.appendChild(tierCards);
                
                // Add drag and drop to new tier
                tierCards.addEventListener('dragover', dragOver);
                tierCards.addEventListener('dragenter', dragEnter);
                tierCards.addEventListener('dragleave', dragLeave);
                tierCards.addEventListener('drop', tierDrop);
                
                tierListContainer.appendChild(tierRow);
            });
            
            // Save tier list functionality
            document.getElementById('save-tier-list').addEventListener('click', function() {
                const tierList = [];
                const tierRows = document.querySelectorAll('.tier-row');
                
                tierRows.forEach(row => {
                    const label = row.querySelector('.tier-label').textContent;
                    const cards = Array.from(row.querySelectorAll('.tier-card')).map(card => {
                        return card.getAttribute('data-id');
                    });
                    
                    tierList.push({
                        label: label,
                        cards: cards
                    });
                });
                
                localStorage.setItem('bbwf-tier-list', JSON.stringify(tierList));
                alert('Tier list saved!');
            });
            
            // Load tier list functionality
            document.getElementById('load-tier-list').addEventListener('click', function() {
                const savedTierList = localStorage.getItem('bbwf-tier-list');
                
                if (savedTierList) {
                    // Clear existing tiers (except default ones)
                    const tierListContainer = document.querySelector('.tier-list-container');
                    const defaultTiers = tierListContainer.querySelectorAll('.tier-row');
                    
                    // Remove all tiers beyond the first 5 (default tiers)
                    for (let i = defaultTiers.length - 1; i >= 5; i--) {
                        tierListContainer.removeChild(defaultTiers[i]);
                    }
                    
                    // Reset default tiers
                    defaultTiers.forEach((tier, index) => {
                        const label = tier.querySelector('.tier-label');
                        const cardsContainer = tier.querySelector('.tier-cards');
                        
                        // Reset labels (S, A, B, C, D)
                        const defaultLabels = ['S Tier', 'A Tier', 'B Tier', 'C Tier', 'D Tier'];
                        if (index < 5) {
                            label.textContent = defaultLabels[index];
                        }
                        
                        // Clear cards
                        cardsContainer.innerHTML = '';
                    });
                    
                    // Clear cards in tiers tracking
                    cardsInTiers.clear();
                    
                    // Load saved tiers
                    const tierList = JSON.parse(savedTierList);
                    
                    tierList.forEach((tier, index) => {
                        let tierRow, tierCards;
                        
                        if (index < 5) {
                            // Use existing default tiers
                            tierRow = tierListContainer.querySelectorAll('.tier-row')[index];
                            tierRow.querySelector('.tier-label').textContent = tier.label;
                            tierCards = tierRow.querySelector('.tier-cards');
                        } else {
                            // Create new tiers
                            tierRow = document.createElement('div');
                            tierRow.className = 'tier-row';
                            
                            const tierLabel = document.createElement('div');
                            tierLabel.className = 'tier-label editable';
                            tierLabel.setAttribute('contenteditable', 'true');
                            tierLabel.textContent = tier.label;
                            
                            tierCards = document.createElement('div');
                            tierCards.className = 'tier-cards';
                            tierCards.setAttribute('data-tier', `tier-${index + 1}`);
                            
                            // Add drag and drop to new tier
                            tierCards.addEventListener('dragover', dragOver);
                            tierCards.addEventListener('dragenter', dragEnter);
                            tierCards.addEventListener('dragleave', dragLeave);
                            tierCards.addEventListener('drop', tierDrop);
                            
                            tierRow.appendChild(tierLabel);
                            tierRow.appendChild(tierCards);
                            tierListContainer.appendChild(tierRow);
                        }
                        
                        // Add cards to tier
                        tier.cards.forEach(cardId => {
                            const card = cardElements[cardId];
                            if (card) {
                                const tierCard = createTierCardElement(cardId);
                                
                                if (tierCard) {
                                    tierCards.appendChild(tierCard);
                                    
                                    // Mark card as being in a tier
                                    cardsInTiers.add(cardId);
                                }
                            }
                        });
                        
                        // Adjust card sizes
                        adjustCardSizes(tierCards);
                    });
                    
                    // Re-render card pool to exclude cards in tiers
                    renderCards();
                    
                    alert('Tier list loaded!');
                } else {
                    alert('No saved tier list found!');
                }
            });
            
            // Reset tier list functionality
            document.getElementById('reset-tier-list').addEventListener('click', function() {
                if (confirm('Are you sure you want to reset the tier list? This cannot be undone.')) {
                    const tierListContainer = document.querySelector('.tier-list-container');
                    const tierRows = tierListContainer.querySelectorAll('.tier-row');
                    
                    // Reset default tiers (S, A, B, C, D)
                    const defaultLabels = ['S Tier', 'A Tier', 'B Tier', 'C Tier', 'D Tier'];
                    
                    tierRows.forEach((tier, index) => {
                        if (index < 5) {
                            const label = tier.querySelector('.tier-label');
                            const cardsContainer = tier.querySelector('.tier-cards');
                            
                            label.textContent = defaultLabels[index];
                            cardsContainer.innerHTML = '';
                        } else {
                            tierListContainer.removeChild(tier);
                        }
                    });
                    
                    // Clear cards in tiers tracking
                    cardsInTiers.clear();
                    
                    // Re-render all cards
                    renderCards();
                }
            });
            
            // Logo click handlers
            document.getElementById('blackbolt-logo').addEventListener('click', function() {
                const controls = document.querySelector('.controls');
                controls.classList.toggle('hidden');
            });
            
            document.getElementById('whiteflare-logo').addEventListener('click', function() {
                // Export tier list as JPG
                exportTierListAsJPG();
            });
            
            // Function to export tier list as JPG
            function exportTierListAsJPG() {
                // We'll use html2canvas library for this
                if (typeof html2canvas === 'undefined') {
                    // Load the library if not already loaded
                    const script = document.createElement('script');
                    script.src = 'https://html2canvas.hertzen.com/dist/html2canvas.min.js';
                    script.onload = function() {
                        captureTierList();
                    };
                    document.head.appendChild(script);
                } else {
                    captureTierList();
                }
                
                function captureTierList() {
                    // Hide controls for the screenshot
                    const controls = document.querySelector('.controls');
                    const originalDisplay = controls.style.display;
                    controls.style.display = 'none';
                    
                    // Capture the tier list container
                    const container = document.querySelector('.container');
                    
                    html2canvas(container, {
                        backgroundColor: '#333333',
                        scale: 2, // Higher quality
                        logging: false,
                        useCORS: true // For loading images from external sources
                    }).then(canvas => {
                        // Restore controls
                        controls.style.display = originalDisplay;
                        
                        // Convert canvas to JPG and download
                        const link = document.createElement('a');
                        link.download = 'bbwf-tier-list.jpg';
                        link.href = canvas.toDataURL('image/jpeg', 0.9);
                        link.click();
                    }).catch(err => {
                        console.error('Error capturing tier list:', err);
                        controls.style.display = originalDisplay;
                        alert('Error exporting tier list. Please try again.');
                    });
                }
            }
            
            // Initial render
            renderCards();
            
            // Show first card by default
            if (cardData.length > 0) {
                largeCard.src = cardData[0].img;
                largeCard.alt = cardData[0].name;
                largeCardName.textContent = cardData[0].name;
                largeCardNumber.textContent = `${cardData[0].number} (#${cardData[0].dex})`;
            }
        });
    </script>
</body>
</html>
